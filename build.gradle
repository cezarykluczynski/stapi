buildscript {
	repositories {
		mavenCentral()
		jcenter()
		maven {
			url "http://maven.jahia.org/maven2/"
		}
		flatDir {
			dirs 'libs'
		}
	}
	dependencies {
		classpath "org.springframework.boot:spring-boot-gradle-plugin:1.4.1.RELEASE"
		classpath "no.nils:wsdl2java:0.10"
	}
}

allprojects {
	apply plugin: 'idea'
	apply plugin: 'eclipse'
	apply plugin: 'java'
	apply plugin: 'groovy'
	apply plugin: 'jacoco'
	apply plugin: 'no.nils.wsdl2java'

//	configurations.all {
//		resolutionStrategy {
//			force 'org.apache.commons:commons-lang3:3.4'
//		}
//	}

	repositories {
		mavenCentral()
		jcenter()
		maven {
			url "http://maven.jahia.org/maven2/"
		}
	}

	dependencies {
		ext.springBootVersion = "1.4.1.RELEASE"

		compile group: 'org.springframework.boot', name: 'spring-boot', version: springBootVersion
		compile group: 'org.springframework.boot', name: 'spring-boot-autoconfigure', version: springBootVersion
		compile group: 'javax.inject', name: 'javax.inject', version: '1'

		// Utils
		compile group: 'org.projectlombok', name: 'lombok', version: '1.16.6'
		compile group: 'com.google.guava', name: 'guava', version: '19.0'
		compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.4'
		compile group: 'commons-validator', name: 'commons-validator', version: '1.5.1'
		compile group: 'commons-logging', name: 'commons-logging', version: '1.2'
		compile group: 'commons-validator', name: 'commons-validator', version: '1.5.1'

		// Testing
		testCompile group: 'commons-io', name: 'commons-io', version: '2.5'
		testCompile group: 'org.codehaus.groovy', name: 'groovy-all', version: '2.4.7'
		testCompile group: 'org.spockframework', name: 'spock-core', version: '1.1-groovy-2.4-rc-1'
		testCompile group: 'org.spockframework', name: 'spock-spring', version: '1.1-groovy-2.4-rc-1'
		testCompile group: 'org.springframework.boot', name: 'spring-boot-starter-tomcat', version: springBootVersion
		testCompile(group: 'org.springframework.boot', name: 'spring-boot-starter-web', version: springBootVersion) {
			exclude(module: 'logback-classic')
			exclude(module: 'spring-boot-starter-logging')
		}
		testCompile(group: 'org.springframework.boot', name: 'spring-boot-starter-test', version: springBootVersion) {
			exclude(module: 'logback-classic')
			exclude(module: 'spring-boot-starter-tomcat')
			exclude(module: 'spring-boot-starter-logging')
		}
		testCompile group: 'cglib', name: 'cglib-nodep', version: '3.2.4'
	}
}

apply from: 'testing.gradle'

group 'stapi'
version '0.0.1-SNAPSHOT'

sourceCompatibility = 1.8
targetCompatibility = 1.8
