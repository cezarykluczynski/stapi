plugins {
	id 'net.ltgt.apt' version '0.8'
}

apply plugin: 'spring-boot'
apply plugin: 'war'

springBoot {
	mainClass = "com.cezarykluczynski.stapi.server.Application"
}

dependencies {
	compile project(':model'), project(':util'), project(':sources'), project(':etl'), project(':client')
	compile group: 'org.springframework.boot', name: 'spring-boot-starter-tomcat', version: springBootVersion
	compile group: 'org.springframework.boot', name: 'spring-boot-starter-web-services', version: springBootVersion
	compile group: 'org.liquibase', name: 'liquibase-core', version: '3.5.3'
	compile group: 'com.oracle', name: 'ojdbc6', version: '11.2.0.4.0-atlassian-hosted'

	// CXF
	compile group: 'org.apache.cxf', name: 'cxf-spring-boot-starter-jaxws', version: '3.1.7'
	compile group: 'org.apache.cxf', name: 'cxf-spring-boot-starter-jaxrs', version: '3.1.7'
	compile group: 'com.fasterxml.jackson.jaxrs', name: 'jackson-jaxrs-json-provider', version: '2.8.3'
	compile group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.8.3'
	compile group: 'org.thymeleaf', name: 'thymeleaf-spring4', version: '3.0.5.RELEASE'

	// Utils
	compile group: 'joda-time', name: 'joda-time', version: '2.9.2'
	compile group: 'com.google.code.gson', name: 'gson', version: '2.5'
	compile 'org.mapstruct:mapstruct-jdk8:1.2.0.Beta2'
	apt 'org.mapstruct:mapstruct-processor:1.2.0.Beta2'

	// Other
	compile group: 'javax.servlet', name: 'jstl', version: '1.2'
	compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.1.0'
	compile group: 'commons-dbcp', name: 'commons-dbcp', version: '1.4'
	compile group: 'javax.json', name: 'javax.json-api', version: '1.0'
	compile group: 'org.glassfish', name: 'javax.json', version: '1.0.4'

	testCompile project(':util').sourceSets.test.output
}

apply from: 'codeGen.gradle'

configurations.compile.exclude group: 'io.swagger'

war {
	archiveName = 'stapi.war'
}
